@* 
    Reusable error alert component
    Usage: <partial name="_ErrorAlertPartial" model='new { AlertId = "myErrorAlert", MessageKey = "ErrorMessage" }' />
*@

@{
    var alertId = ViewData["AlertId"]?.ToString() ?? "errorAlert";
    var messageKey = ViewData["MessageKey"]?.ToString() ?? "ErrorMessage";
    var message = TempData[messageKey]?.ToString();
}

@if (!string.IsNullOrEmpty(message))
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert" id="@alertId">
        <i class="fa-solid fa-circle-exclamation me-2"></i>
        <strong>Error!</strong> @message
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <script>
        (function() {
            const alert = document.getElementById('@alertId');
            if (alert) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
                setTimeout(function() {
                    if (typeof bootstrap !== 'undefined') {
                        const bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
                        bsAlert.close();
                    }
                }, 5000);
            }
        })();
    </script>
}
